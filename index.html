<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>ğŸ§” ChrobryRPG</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <canvas id="canvas"></canvas>
  <!-- Mini-mapa w prawym gÃ³rnym rogu -->
  <canvas id="minimap" class="minimap"></canvas>
  <div id="ui">
    <!-- Nowy HUD - Modern Game Design -->
    <div class="hud-container">
      <!-- GÃ³rna sekcja: HP, MP, XP w jednej linii -->
      <div class="hud-bars-section">
        <div class="hud-bar-group">
          <div class="hud-bar-label">
            <span class="hud-icon">â¤ï¸</span>
            <span class="hud-bar-text" id="hpNum">100/100</span>
          </div>
          <div class="hud-bar hp-bar">
            <div class="hud-bar-fill hp-fill" id="hpFill" style="width:100%"></div>
          </div>
        </div>
        
        <div class="hud-bar-group">
          <div class="hud-bar-label">
            <span class="hud-icon">ğŸ”·</span>
            <span class="hud-bar-text" id="mpNum">50/50</span>
          </div>
          <div class="hud-bar mp-bar">
            <div class="hud-bar-fill mp-fill" id="mpFill" style="width:100%"></div>
          </div>
        </div>
        
        <div class="hud-bar-group">
          <div class="hud-bar-label">
            <span class="hud-icon">â­</span>
            <span class="hud-bar-text">L<span id="lvlNum">1</span> <span id="xpNum" class="hud-xp-text">0/100</span></span>
          </div>
          <div class="hud-bar xp-bar">
            <div class="hud-bar-fill xp-fill" id="xpFill" style="width:0%"></div>
          </div>
        </div>
      </div>
      
      <!-- Dolna sekcja: Inventory i statystyki -->
      <div class="hud-stats-section">
        <div class="hud-stats-row">
          <div class="hud-stat-badge lives-badge" title="Å»ycia">
            <span class="hud-stat-icon">â¤ï¸</span>
            <span class="hud-stat-value" id="livesDisplay">3</span>
          </div>
          <div class="hud-stat-badge gold-badge" title="ZÅ‚oto">
            <span class="hud-stat-icon">ğŸ’°</span>
            <span class="hud-stat-value" id="gold">0</span>
          </div>
        </div>
        
        <div class="hud-inventory-row">
          <div class="hud-inv-item" title="JabÅ‚ka">
            <span class="hud-inv-icon">ğŸ</span>
            <span class="hud-inv-count" id="hudApples">0</span>
          </div>
          <div class="hud-inv-item" title="MiÄ™so">
            <span class="hud-inv-icon">ğŸ–</span>
            <span class="hud-inv-count" id="hudMeat">0</span>
          </div>
          <div class="hud-inv-item" title="Flaszki">
            <span class="hud-inv-icon">ğŸ¾</span>
            <span class="hud-inv-count" id="hudMead">0</span>
          </div>
          <div class="hud-inv-item btn-icon" id="saveBtn" title="Zapisz grÄ™">
            <span class="hud-inv-icon">ğŸ’¾</span>
          </div>
        </div>
      </div>
    </div>
    <!-- Przyciski akcji - prawa strona pod mini-mapÄ… -->
    <div class="action-buttons-panel">
      <div class="action-btn-item btn-icon" id="questBtn" title="Questy (Q)">ğŸ“œ</div>
      <div class="action-btn-item btn-icon" id="inventoryBtn" title="Inventory (E)">ğŸ’</div>
      <div class="action-btn-item btn-icon" id="statsBtn" title="Statystyki (R)">ğŸ“Š</div>
      <div class="action-btn-item btn-icon" id="interactBtn" title="Interakcja (F)">ğŸ’¬</div>
    </div>
    
    <!-- GaÅ‚ka analogowa (lewy dolny rÃ³g) -->
    <div class="virtual-joystick" id="joystick">
      <div class="joystick-base"></div>
      <div class="joystick-stick" id="joystickStick"></div>
    </div>
    
    <!-- Przyciski akcji (prawy dolny rÃ³g) -->
    <div class="action-buttons">
      <button class="action-btn action-btn-b" id="actionBtnB" title="Atak projectile (B)">ğŸ¹</button>
      <button class="action-btn action-btn-a" id="actionBtnA" title="Atak rÄ™cz (A)">âš”ï¸</button>
    </div>
  </div>

  <!-- Modal level-up -->
  <div class="modal" id="levelUpModal">
    <div class="panel">
      <button class="modal-close" aria-label="Zamknij">Ã—</button>
      <h1>ğŸ›¡ï¸ Awans na poziom <span id="lvlUpTo">2</span></h1>
      <div style="margin-bottom:24px; padding:20px; background:linear-gradient(135deg, rgba(16,185,129,0.3), rgba(5,150,105,0.3)); border:3px solid rgba(16,185,129,0.5); border-radius:16px; font-size:22px; font-weight:700; text-align:center; box-shadow: 0 4px 16px rgba(16,185,129,0.3);">
        â­ Punkty do wykorzystania: <span id="levelUpPoints">1</span>
      </div>
      <div style="display:flex; flex-direction:column; gap:12px;">
        <button class="btn" id="upHP" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">â¤ï¸ Maks. HP</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upHPValue">100</span>
        </button>
        <button class="btn" id="upMP" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸ”· Maks. Mana</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upMPValue">50</span>
        </button>
        <button class="btn" id="upSpeed" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸƒ PrÄ™dkoÅ›Ä‡ ruchu</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upSpeedValue">2.8</span>
        </button>
        <button class="btn" id="upMeleeSpeed" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">âš”ï¸ PrÄ™dkoÅ›Ä‡ ataku wrÄ™cz</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upMeleeSpeedValue">400ms</span>
        </button>
        <button class="btn" id="upMeleeDmg" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸ—¡ï¸ SiÅ‚a ataku wrÄ™cz</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upMeleeDmgValue">18</span>
        </button>
        <button class="btn" id="upRangedSpeed" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸ¹ PrÄ™dkoÅ›Ä‡ ataku projectile</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upRangedSpeedValue">300ms</span>
        </button>
        <button class="btn" id="upRangedDmg" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸ’¥ SiÅ‚a ataku projectile</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upRangedDmgValue">16</span>
        </button>
        <button class="btn" id="upMagnet" style="justify-content:space-between; text-align:left;">
          <span style="font-size:18px;">ğŸ§² PrzyciÄ…ganie dropÃ³w</span>
          <span style="font-size:18px; font-weight:700; opacity:0.9;" id="upMagnetValue">0px</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Quest Log / Start Screen / Help (PoÅ‚Ä…czony) -->
  <div class="modal" id="questModal">
    <div class="panel">
      <!-- Sekcja Start Screen (tylko gdy to start screen) -->
      <div id="startScreenSection" style="margin-bottom:30px; display:none;">
        <div style="text-align:center; margin-bottom:40px;">
          <h1 style="font-size:56px; margin-bottom:24px; font-weight:800;">ğŸ° Chrobry RPG</h1>
          <p style="font-size:20px; margin-bottom:40px; opacity:0.95; line-height:1.6;">
            Walcz, zbieraj, rozwijaj siÄ™ i przetrwaj w Å›wiecie peÅ‚nym niebezpieczeÅ„stw!
          </p>
          <div style="display:flex; flex-direction:column; gap:12px; margin-bottom:40px; max-width:400px; margin-left:auto; margin-right:auto;">
            <div style="padding:20px; background:rgba(239,68,68,0.15); border:2px solid rgba(239,68,68,0.3); border-radius:16px; font-size:20px; font-weight:700;">â¤ï¸ Å»ycia: <span id="startScreenLives">3</span></div>
            <div style="padding:20px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:16px; font-size:20px; font-weight:700;">â­ Poziom: <span id="startScreenLevel">1</span></div>
          </div>
        </div>
        <button class="btn btn-success" id="startGameBtn">ğŸ® Rozpocznij grÄ™</button>
      </div>
      
      <!-- Sekcja Quest Log -->
      <div style="margin-bottom:30px;">
        <h2 style="font-size:24px; font-weight:700; margin-bottom:20px; text-align:center;">ğŸ“œ Quest Log</h2>
        <div style="margin-bottom:12px">
          <!-- Quest 1: ZasadÅº drzewo -->
          <div style="margin-bottom:16px; border:2px solid rgba(255,255,255,0.3); border-radius:16px; padding:20px; background:rgba(0,0,0,0.4);">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; flex-wrap:wrap; gap:12px;">
              <strong style="font-size:22px; font-weight:700;">1. ZasadÅº drzewo</strong>
              <div style="display:flex; align-items:center; gap:12px;">
                <span id="quest1Status" style="color:#10b981; font-weight:700; font-size:18px;">âœ“ UkoÅ„czone</span>
                <button class="btn-icon-small" id="quest1Toggle" style="font-size:20px; padding:8px 12px; min-width:44px; min-height:44px; background:rgba(79,70,229,0.3); border:2px solid rgba(79,70,229,0.5); border-radius:12px; cursor:pointer;" title="RozwiÅ„/ZwiÅ„ opis">â–¼</button>
              </div>
            </div>
            <div id="quest1Description" style="display:none; margin-top:16px; padding-top:16px; border-top:2px solid rgba(255,255,255,0.2);">
              <p style="margin:0; line-height:1.7; color:rgba(255,255,255,0.95); font-size:18px;">
                ğŸŒ³ WÄ™drujÄ…c po Å›wiecie, zauwaÅ¼asz, Å¼e lasy sÄ… rzadkie. ZasadÅº swoje pierwsze drzewo, aby przywrÃ³ciÄ‡ naturze jej piÄ™kno. Zbierz nasiona z jabÅ‚ek i uÅ¼yj ich, aby zasadziÄ‡ nowe drzewo na mapie.
              </p>
            </div>
          </div>
          
          <!-- Quest 2: SpÅ‚odÅº syna -->
          <div style="margin-bottom:16px; border:2px solid rgba(255,255,255,0.3); border-radius:16px; padding:20px; background:rgba(0,0,0,0.4);">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; flex-wrap:wrap; gap:12px;">
              <strong style="font-size:22px; font-weight:700;">2. SpÅ‚odÅº syna</strong>
              <div style="display:flex; align-items:center; gap:12px;">
                <span id="quest2Status" style="color:#10b981; font-weight:700; font-size:18px;">âœ“ UkoÅ„czone</span>
                <button class="btn-icon-small" id="quest2Toggle" style="font-size:20px; padding:8px 12px; min-width:44px; min-height:44px; background:rgba(79,70,229,0.3); border:2px solid rgba(79,70,229,0.5); border-radius:12px; cursor:pointer;" title="RozwiÅ„/ZwiÅ„ opis">â–¼</button>
              </div>
            </div>
            <div id="quest2Description" style="display:none; margin-top:16px; padding-top:16px; border-top:2px solid rgba(255,255,255,0.2);">
              <p style="margin:0 0 16px 0; line-height:1.7; color:rgba(255,255,255,0.95); font-size:18px;">
                ğŸ‘© Spotkaj niewiastÄ™ wÄ™drujÄ…cÄ… po Å›wiecie. Aby spÅ‚odziÄ‡ z niÄ… potomka, musisz zdobyÄ‡ 50 jabÅ‚ek i 50 miÄ™sa. PamiÄ™taj - jest 50% szansy, Å¼e urodzi siÄ™ syn lub cÃ³rka!
              </p>
              <div style="display:flex; flex-direction:column; gap:12px; margin-top:16px;">
                <div style="padding:16px; background:rgba(239,68,68,0.15); border:2px solid rgba(239,68,68,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ JabÅ‚ka: <span id="quest2Apples">0</span>/50</div>
                <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ– MiÄ™so: <span id="quest2Meat">0</span>/50</div>
              </div>
            </div>
          </div>
          
          <!-- Quest 3: Napisz ksiÄ…Å¼kÄ™ -->
          <div style="margin-bottom:16px; border:2px solid rgba(255,255,255,0.3); border-radius:16px; padding:20px; background:rgba(0,0,0,0.4);">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; flex-wrap:wrap; gap:12px;">
              <strong style="font-size:22px; font-weight:700;">3. Napisz ksiÄ…Å¼kÄ™</strong>
              <div style="display:flex; align-items:center; gap:12px;">
                <span id="quest3Status" style="color:#10b981; font-weight:700; font-size:18px;">âœ“ UkoÅ„czone</span>
                <button class="btn-icon-small" id="quest3Toggle" style="font-size:20px; padding:8px 12px; min-width:44px; min-height:44px; background:rgba(79,70,229,0.3); border:2px solid rgba(79,70,229,0.5); border-radius:12px; cursor:pointer;" title="RozwiÅ„/ZwiÅ„ opis">â–¼</button>
              </div>
            </div>
            <div id="quest3Description" style="display:none; margin-top:16px; padding-top:16px; border-top:2px solid rgba(255,255,255,0.2);">
              <p style="margin:0 0 16px 0; line-height:1.7; color:rgba(255,255,255,0.95); font-size:18px;">
                ğŸ§™ Spotkaj czarodzieja wÄ™drujÄ…cego po Å›wiecie. Aby napisaÄ‡ z nim ksiÄ…Å¼kÄ™, musisz zebraÄ‡ ogromne iloÅ›ci zasobÃ³w: 100 miÄ™sa, 100 jabÅ‚ek i 100 monet. To bÄ™dzie wymagaÅ‚o wiele wysiÅ‚ku, ale nagroda jest warta poÅ›wiÄ™cenia!
              </p>
              <div style="display:flex; flex-direction:column; gap:12px; margin-top:16px;">
                <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ– MiÄ™so: <span id="quest3Meat">0</span>/100</div>
                <div style="padding:16px; background:rgba(239,68,68,0.15); border:2px solid rgba(239,68,68,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ JabÅ‚ka: <span id="quest3Apples">0</span>/100</div>
                <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ’° Monety: <span id="quest3Gold">0</span>/100</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sekcja Zasady gry -->
      <div style="margin-bottom:30px; border-top:2px solid rgba(255,255,255,0.2); padding-top:30px;">
        <h2 style="font-size:22px; font-weight:700; margin-bottom:20px; text-align:center;">â“ Zasady gry</h2>
        
        <div style="margin-bottom:24px;">
          <h3 style="font-size:18px; font-weight:700; margin-bottom:12px; color:rgba(255,255,255,0.95);">ğŸ“± Sterowanie (Mobile)</h3>
          <div style="display:flex; flex-direction:column; gap:8px;">
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ® GaÅ‚ka analogowa</strong> (lewy dolny rÃ³g) - poruszanie siÄ™
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>âš”ï¸ Przycisk A</strong> (prawy dolny rÃ³g) - atak mieczem
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ¹ Przycisk B</strong> (prawy dolny rÃ³g) - atak Å‚ukiem
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ“œ Questy</strong> - przycisk w gÃ³rnym menu
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ’ Inventory</strong> - przycisk w gÃ³rnym menu
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ“Š Statystyki</strong> - przycisk w gÃ³rnym menu
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ’¬ Interakcja</strong> - przycisk w gÃ³rnym menu (aktywuj, potem kliknij NPC)
            </div>
          </div>
        </div>

        <div style="margin-bottom:24px;">
          <h3 style="font-size:18px; font-weight:700; margin-bottom:12px; color:rgba(255,255,255,0.95);">ğŸ–¥ï¸ Sterowanie (Desktop)</h3>
          <div style="display:flex; flex-direction:column; gap:8px;">
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>WASD / StrzaÅ‚ki</strong> - poruszanie siÄ™
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>Spacja</strong> - atak mieczem
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>KlikniÄ™cie myszkÄ…</strong> - atak Å‚ukiem w kierunku kursora
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>Q</strong> - Questy
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>E</strong> - Inventory
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>R</strong> - Statystyki
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>F</strong> - Tryb interakcji (potem kliknij NPC)
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ESC</strong> - Zamknij otwarte okno
            </div>
          </div>
        </div>

        <div style="margin-bottom:20px;">
          <h3 style="font-size:18px; font-weight:700; margin-bottom:12px; color:rgba(255,255,255,0.95);">ğŸ® Mechaniki gry</h3>
          <div style="display:flex; flex-direction:column; gap:8px;">
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ° Jaskinie</strong> - generujÄ… wrogÃ³w, dropujÄ… zÅ‚oto i przedmioty po zniszczeniu
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸŒ³ Drzewa</strong> - dropujÄ… jabÅ‚ka, moÅ¼na je Å›cinaÄ‡ dla drewna
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ‘© Niewiasta</strong> - daj 50 jabÅ‚ek i 50 miÄ™sa aby spÅ‚odziÄ‡ dziecko
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>ğŸ§™ Czarodziej</strong> - daj 100 miÄ™sa, 100 jabÅ‚ek i 100 monet aby napisaÄ‡ ksiÄ…Å¼kÄ™
            </div>
            <div class="pill" style="text-align:left; padding:10px 14px; font-size:14px;">
              <strong>â¤ï¸ Å»ycia</strong> - startujesz z 3, dostajesz +1 za kaÅ¼dy level up
            </div>
          </div>
        </div>
      </div>
      
      <!-- Przycisk zamknij na koÅ„cu -->
      <button class="btn btn-secondary" id="closeQuestBtn" style="margin-top:20px;">âŒ Zamknij</button>
    </div>
  </div>

  <!-- Modal Inventory -->
  <div class="modal" id="inventoryModal">
    <div class="panel">
      <button class="modal-close" aria-label="Zamknij">Ã—</button>
      <h1>ğŸ’ Inventory</h1>
      <div style="margin-bottom:20px; display:flex; flex-direction:column; gap:12px;">
        <button class="btn btn-warning" id="invAppleClick" style="justify-content:space-between;">ğŸ JabÅ‚ka: <span id="invApples">0</span> <span style="opacity:0.8;">(kliknij aby zjeÅ›Ä‡)</span></button>
        <button class="btn btn-success" id="healWithApplesBtn" style="justify-content:center;">â¤ï¸ Ulecz siÄ™ jabÅ‚kami</button>
        <button class="btn btn-warning" id="invMeatClick" style="justify-content:space-between;">ğŸ– MiÄ™so: <span id="invMeat">0</span> <span style="opacity:0.8;">(kliknij aby zjeÅ›Ä‡)</span></button>
        <button class="btn btn-warning" id="invMeadClick" style="justify-content:space-between;">ğŸ¾ Flaszka: <span id="invMead">0</span> <span style="opacity:0.8;">(kliknij aby wypiÄ‡)</span></button>
        <button class="btn btn-success" id="invSeedClick" style="justify-content:space-between;">ğŸŒ± Nasiona: <span id="invSeeds">0</span> <span style="opacity:0.8;">(kliknij aby aktywowaÄ‡ zasadzanie)</span></button>
      </div>
      <div id="plantingModeIndicator" style="margin-bottom:20px; display:none; padding:16px; background:rgba(16,185,129,0.2); border:2px solid rgba(16,185,129,0.4); border-radius:12px; color:#10b981; font-weight:bold; font-size:16px; text-align:center;">ğŸŒ± Tryb zasadzania aktywny - kliknij na mapie aby zasadziÄ‡ drzewo</div>
      <button class="btn btn-secondary" id="closeInventoryBtn">âŒ Zamknij</button>
    </div>
  </div>

  <!-- Modal Character Stats - Redesigned -->
  <div class="modal" id="statsModal">
    <div class="panel stats-panel">
      <button class="modal-close" aria-label="Zamknij">Ã—</button>
      <div class="stats-header">
        <h1>ğŸ“Š Karta Postaci</h1>
        <div class="stats-level-badge">
          <span class="stats-level-icon">â­</span>
          <span class="stats-level-text">Poziom <span id="statsLevel">1</span></span>
        </div>
      </div>
      
      <!-- Podstawowe statystyki -->
      <div class="stats-section">
        <h2 class="stats-section-title">â¤ï¸ Podstawowe</h2>
        <div class="stats-grid">
          <div class="stat-card stat-card-hp">
            <div class="stat-card-header">
              <span class="stat-icon">â¤ï¸</span>
              <span class="stat-label">Zdrowie</span>
            </div>
            <div class="stat-value">
              <span id="statsHP">0</span><span class="stat-separator">/</span><span id="statsHPMax">0</span>
            </div>
            <div class="stat-bar-container">
              <div class="stat-bar stat-bar-hp" id="statsHPBar"></div>
            </div>
          </div>
          
          <div class="stat-card stat-card-mp">
            <div class="stat-card-header">
              <span class="stat-icon">ğŸ”·</span>
              <span class="stat-label">Mana</span>
            </div>
            <div class="stat-value">
              <span id="statsMP">0</span><span class="stat-separator">/</span><span id="statsMPMax">0</span>
            </div>
            <div class="stat-bar-container">
              <div class="stat-bar stat-bar-mp" id="statsMPBar"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Statystyki walki -->
      <div class="stats-section">
        <h2 class="stats-section-title">âš”ï¸ Walka</h2>
        <div class="stats-grid">
          <div class="stat-card stat-card-melee">
            <div class="stat-card-header">
              <span class="stat-icon">âš”ï¸</span>
              <span class="stat-label">Atak WrÄ™cz</span>
            </div>
            <div class="stat-details">
              <div class="stat-detail-item">
                <span class="stat-detail-label">SiÅ‚a:</span>
                <span class="stat-detail-value" id="statsMeleeDmg">0</span>
              </div>
              <div class="stat-detail-item">
                <span class="stat-detail-label">CD:</span>
                <span class="stat-detail-value" id="statsMeleeCD">0</span><span class="stat-unit">ms</span>
              </div>
            </div>
          </div>
          
          <div class="stat-card stat-card-ranged">
            <div class="stat-card-header">
              <span class="stat-icon">ğŸ¹</span>
              <span class="stat-label">Atak Dystansowy</span>
            </div>
            <div class="stat-details">
              <div class="stat-detail-item">
                <span class="stat-detail-label">SiÅ‚a:</span>
                <span class="stat-detail-value" id="statsRangedDmg">0</span>
              </div>
              <div class="stat-detail-item">
                <span class="stat-detail-label">CD:</span>
                <span class="stat-detail-value" id="statsRangedCD">0</span><span class="stat-unit">ms</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Statystyki ruchu i specjalne -->
      <div class="stats-section">
        <h2 class="stats-section-title">ğŸƒ Ruch & Specjalne</h2>
        <div class="stats-grid stats-grid-single">
          <div class="stat-card stat-card-speed">
            <div class="stat-card-header">
              <span class="stat-icon">ğŸƒ</span>
              <span class="stat-label">PrÄ™dkoÅ›Ä‡ Ruchu</span>
            </div>
            <div class="stat-value-large">
              <span id="statsSpeed">0</span>
            </div>
          </div>
          
          <div class="stat-card stat-card-magnet">
            <div class="stat-card-header">
              <span class="stat-icon">ğŸ§²</span>
              <span class="stat-label">PrzyciÄ…ganie DropÃ³w</span>
            </div>
            <div class="stat-value-large">
              <span id="statsMagnet">0px</span>
            </div>
            <div class="stat-description" id="statsMagnetDesc">Poziom + bonus</div>
          </div>
        </div>
      </div>
      
      <button class="btn btn-secondary" id="closeStatsBtn" style="margin-top:24px;">âŒ Zamknij</button>
    </div>
  </div>

  <!-- Modal Woman Dialog -->
  <div class="modal" id="womanModal">
    <div class="panel">
      <button class="modal-close" aria-label="Zamknij">Ã—</button>
      <h1>ğŸ‘© Niewiasta</h1>
      <p style="margin:20px 0; font-size:18px; line-height:1.6;">Hola! Chcesz mi spÅ‚odziÄ‡ syna? Aby spÅ‚odziÄ‡ mi syna luby, daj mnie 50 jabÅ‚ek i 50 miÄ™siwa kochaniutki. Nie jestem taka Å‚atwa! A! I pamiÄ™taj ze jest 50/50 % szansa ze dropne Ci syna albo corke</p>
      <div style="display:flex; flex-direction:column; gap:12px; margin:20px 0;">
        <div style="padding:16px; background:rgba(239,68,68,0.15); border:2px solid rgba(239,68,68,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ JabÅ‚ka: <span id="womanApples">0</span>/50</div>
        <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ– MiÄ™so: <span id="womanMeat">0</span>/50</div>
      </div>
      <div style="display:flex; flex-direction:column; gap:12px; margin-top:20px;">
        <button class="btn btn-primary" id="giveAppleBtn">ğŸ Daj jabÅ‚ko (1)</button>
        <button class="btn btn-success" id="giveAllApplesBtn">ğŸ Daj wszystkie jabÅ‚ka</button>
        <button class="btn btn-primary" id="giveMeatBtn">ğŸ– Daj miÄ™so (1)</button>
        <button class="btn btn-success" id="giveAllMeatBtn">ğŸ– Daj wszystkie miÄ™so</button>
        <button class="btn btn-secondary" id="closeWomanBtn">âŒ Zamknij</button>
      </div>
    </div>
  </div>

  <!-- Modal Wizard Dialog -->
  <div class="modal" id="wizardModal">
    <div class="panel">
      <button class="modal-close" aria-label="Zamknij">Ã—</button>
      <h1>ğŸ§™ Czarodziej</h1>
      <p style="margin:20px 0; font-size:18px; line-height:1.6;">Aby napisaÄ‡ ksiÄ…Å¼kÄ™, potrzebujÄ™ 100 miÄ™sa, 100 jabÅ‚ek i 100 monet.</p>
      <div style="display:flex; flex-direction:column; gap:12px; margin:20px 0;">
        <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ– MiÄ™so: <span id="wizardMeat">0</span>/100</div>
        <div style="padding:16px; background:rgba(239,68,68,0.15); border:2px solid rgba(239,68,68,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ JabÅ‚ka: <span id="wizardApples">0</span>/100</div>
        <div style="padding:16px; background:rgba(245,158,11,0.15); border:2px solid rgba(245,158,11,0.3); border-radius:12px; font-size:18px; font-weight:600; text-align:center;">ğŸ’° Monety: <span id="wizardGold">0</span>/100</div>
      </div>
      <div style="display:flex; flex-direction:column; gap:12px; margin-top:20px;">
        <button class="btn btn-primary" id="wizardGiveMeatBtn">ğŸ– Daj miÄ™so (1)</button>
        <button class="btn btn-success" id="wizardGiveAllMeatBtn">ğŸ– Daj wszystkie miÄ™so</button>
        <button class="btn btn-primary" id="wizardGiveAppleBtn">ğŸ Daj jabÅ‚ko (1)</button>
        <button class="btn btn-success" id="wizardGiveAllApplesBtn">ğŸ Daj wszystkie jabÅ‚ka</button>
        <button class="btn btn-primary" id="wizardGiveGoldBtn">ğŸ’° Daj monetÄ™ (1)</button>
        <button class="btn btn-success" id="wizardGiveAllGoldBtn">ğŸ’° Daj wszystkie monety</button>
        <button class="btn btn-success" id="wizardCompleteBtn">ğŸ“– Napisz ksiÄ…Å¼kÄ™</button>
        <button class="btn btn-secondary" id="closeWizardBtn">âŒ Zamknij</button>
      </div>
    </div>
  </div>

  <!-- Modal Start Screen -->

  <script src="game.js"></script>
</body>
</html>

